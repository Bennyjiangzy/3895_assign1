<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,minimum-scale=1">
		<title>Login</title>
        <!-- the form awesome library is used to add icons to our form -->
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css">
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
        <!-- include the stylesheet file -->
        <link rel="stylesheet" href="../styles.css">
	</head>
	<body>
		<div class="row mt-5">
			<div class="col-md-6 m-auto text-center">
				<div class="login">
					<h1>Login</h1>
					<form action="/auth" method="post">
						<label for="username">
							<!-- font awesome icon -->
							<i class="fas fa-user"></i>
						</label>
						<input type="text" name="username" placeholder="Username" id="username" required>
						<label for="password">
							<i class="fas fa-lock"></i>
						</label>
						<input type="password" name="password" placeholder="Password" id="password" required>
						<input id="submit_btn" type="submit" value="Register">
					</form>
				</div>
			</div>
		</div>
	</body>
	<script>
		let submitRegisterBtn = document.getElementById("submit_btn");
		submitRegisterBtn.addEventListener('click', register);

		var xhr = null;

		getXmlHttpRequestObject = function () {
			if (!xhr) {
				// Create a new XMLHttpRequest object 
				xhr = new XMLHttpRequest();
			}
			return xhr;
		};

		function register() {
			usernameToSend = document.getElementById('username').value;
			passwordToSend = document.getElementById('password').value;
			xhr = getXmlHttpRequestObject();
			dataToSend = {"username": usernameToSend,
						  "password": passwordToSend}

			// asynchronous requests
			xhr.open("POST", "http://localhost:8090/user", true);
			xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
			// Send the request over the network
			xhr.send(JSON.stringify({dataToSend}));
    	}
	</script>
</html>